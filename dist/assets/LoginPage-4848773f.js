import{r as s,a as e,j as h,b as f}from"./index-39a70ab6.js";import{S as v}from"./sweetalert2.esm.all-6401f406.js";const g=()=>{const[i,r]=s.useState(""),[l,n]=s.useState(""),[u,d]=s.useState([]),m=t=>{t.preventDefault(),f({method:"post",url:"https://api.escuelajs.co/api/v1/auth/login",data:{email:i,password:l}}).then(a=>{console.log(a),a.status==201&&(v.fire({icon:"success",title:"acceso correcto"}),r(""),n(""),document.cookie="access_token="+a.data.access_token,document.cookie="refresh_token="+a.data.refresh_token,setTimeout(()=>{window.location.reload()},3e3))}).catch(a=>{a.response.status==401&&(d(["usuario o contraseña invalidos"]),setTimeout(()=>{d([])},5e3))})};return s.useEffect(()=>{let a=document.cookie.split(";"),c={};a.map(p=>{let o=p.replace(" ","");o=o.split("="),c[o[0]]=o[1]?o[1]:o[0]}),c.access_token&&c.refresh_token&&window.location.replace("/")},[]),e("div",{className:"q2",children:e("div",{className:"divprin",children:e("div",{className:"PRIN1",children:h("form",{onSubmit:m,children:[e("h1",{children:"login"}),u.map(t=>e("p",{className:"err",children:t})),e("label",{htmlFor:"nombreC",children:"EMAIL"}),e("input",{type:"text",onChange:t=>r(t.target.value),value:i,id:"nombreC",placeholder:"INGRESE CORREO"}),e("label",{htmlFor:"CCcedula",children:"CONTRASEÑA"}),e("input",{type:"password",onChange:t=>n(t.target.value),value:l,id:"CCcedula",placeholder:"INGRESE CONTRASEÑA"}),e("input",{type:"submit",value:"enviar"})]})})})})};export{g as default};
